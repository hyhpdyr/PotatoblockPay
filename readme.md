# 土豆方块码支付

> [点击此处](mailto:gwc1718781342@163.com)向作者发送邮件。  

## 部署

### 数据库

本程序依赖 `MySQL` 数据库运行。请确保数据库已准备妥当，后续 `监听支付` 将需要填入数据库相关信息。  

部署 `MySQL` 完成后，请在准备使用的数据库下执行 `/建表语句.sql` 来初始化数据库。

### 监听支付

本服务必须部署在 `Windows` 操作系统上，且设备架构应当为 `AMD64` 。  

以下内容中的文件全部在 `/Listener/` 目录下。  

下载 `Python3` 并使用 `pip` 下载 `requirements.txt` 中的全部库。  

#### 微信支付

打开 `微信电脑版 3.9.12.51` ，并双击 `微信支付` 聊天窗口使其独立出来，并保持该窗口始终活跃显示。  

> 温馨提示: 此处推荐按下 `微信支付` 右上角的 `📌` 按钮，这样窗口会始终保持置顶。  

进入 `/WeChatPay/` 目录，修改配置文件 `cfg.py` 并启动 `main.py` 。  

> 温馨提示: 更换微信账号或微信支付聊天记录被清理后，应当删除 `/WeChatPay/not_first_use.sig` 文件，否则收款的第一单将会遗漏。  

#### 支付宝

使用前请先检查 `Edge` 浏览器是否已经安装，且版本号是否为 `138.0.3351.83` 。如有不符，请您自行更换浏览器驱动。  

进入 `/Alipay/` 目录，修改配置文件 `cfg.py` 并启动 `main.py` 。  

程序将会操控浏览器弹出支付宝登陆页面。请您使用手机支付宝手动扫码登陆，并在完成后向程序中输入任意字符。  

支付宝可能会弹出扫码验证，如果遇到，根据程序指引手动扫码解决即可。

## 调用

### Python

以下内容中的文件全部在 `/API/` 目录下。  

下载 `Python3` 并使用 `pip` 下载 `requirements.txt` 中的全部库。  

将 `/API/` 目录作为一整个库导入。使用案例参照 `example.py` 即可。  

### 其他编程语言

暂无，也许将在后续更新。  
